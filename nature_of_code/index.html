<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thema 1</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>

    <!-- KORREKTUR: Container für das Bild-Modal -->
    <div id="image-modal" class="image-modal-container">
        <div class="image-modal-wrapper">
            <span class="close-image-btn">&times;</span>
            <img class="modal-content" id="modal-image">
        </div>
    </div>

    <!-- Container für das Iframe-Modal -->
    <div id="iframe-modal" class="iframe-modal-container">
        <!-- Der Zurück-Pfeil, der genau wie der andere aussehen wird -->
        <a href="#" id="close-iframe-btn" class="back-link">
            <img src="../images/back.png" alt="Zurück">
        </a>
        <!-- Das Iframe, das den Inhalt anzeigt -->
        <iframe id="external-content-frame" src="" allow="camera; microphone"></iframe>
    </div>
    <header class="top-banner">
        <a href="../index.html">
            <img src="../images/logo.png" alt="Dokumentation Logo">
        </a>
    </header>

    <main>
        <div class="topic-header">
            <img src="../images/wattwurmhaufen.jpeg" alt="Nature of Code" class="topic-main-image">
            <a href="https://hbk-bs.github.io/nature-of-code-LiSchwarz/" class="overlay-link">
                <img src="../images/play.png" alt="Sketch ansehen">
            </a>
            <a href="../index.html" class="back-link">
                <img src="../images/back.png" alt="Zurück zur Startseite">
            </a>
        </div>
        
        <div class="topic-content">
            <h1>Nature of Code</h1>
            <h3>
                <a href="https://github.com/hbk-bs/nature-of-code-LiSchwarz" target="_blank" rel="noopener noreferrer" class="repo-link">
                    <img src="../images/folder.png" alt="GitHub Repository">
                    <span>GitHub Repository</span>
                </a>
            </h3>
            <h2>Wattwurmhaufen</h2>
            <p>Die Exkursion auf die Nordseeinsel Amrum stand unter dem Thema <strong>„natürliche Muster und Verhaltensweisen“</strong>. Sie basierte auf dem Buch „The Nature of Code“ von <strong>Daniel Shiffman</strong>, das erklärt, wie man natürliche Phänomene mit Code simulieren kann – zum Beispiel Bewegung, Wachstum oder Verhalten aus der Natur. Es geht darum, die <strong>„Logik der Natur“</strong> in Code zu übersetzen. Daniel Shiffman zeigt, wie man Zufall, Kräfte, Wahrscheinlichkeiten oder evolutionäre Prozesse nutzt, um besonders lebendige, dynamische Simulationen zu erstellen.<br>
<br>
Amrum ist geprägt durch weitläufige Natur, Salzwiesen, Dünen und das Wattenmeer. Durch verschiedene Wanderungen und Beobachtungen haben wir die Landschaft intensiv kennengelernt und gezielt nach natürlichen Mustern und Verhaltensweisen wie Tierbewegungen, Pflanzenwachstum oder Wellenbewegungen gesucht. Wir waren mit Kamera und Skizzenbuch unterwegs und haben versucht, unsere Eindrücke festzuhalten.<br>
Zurück in Braunschweig sichtete ich meine Beobachtungen und entschied, welchen Bereich ich weiter vertiefen möchte. Besonders Interesse weckten bei mir die Wattwürmer und ihre Verhaltensweise. <strong>Wattwurmhaufen entstehen</strong>, wenn der Wattwurm Sand frisst, Nährstoffe herausfiltert und den Rest als spiralförmige Häufchen ausscheidet. Das Loch daneben ist der Eingang zu seiner u-förmigen Wohnröhre. Durch das Loch zieht er Wasser und Nahrung ein, der Haufen ist der Ausgang.</p>

            <!-- KORREKTUR: Bildergalerie mit Unterschriften -->
            <div class="image-gallery">
                <figure>
                    <img src="../images/viele_haufen.jpeg" alt="Wattwurmhaufen im Sand">
                    <figcaption>Haufen im Sand</figcaption>
                </figure>
                <figure>
                    <img src="../images/haufen.jpeg" alt="Detailaufnahme Wattwurmhaufen">
                    <figcaption>Detailaufnahme</figcaption>
                </figure>
                <figure>
                    <img src="../images/haufen_sketch.jpeg" alt="Skizze Wattwurmhaufen">
                    <figcaption>Skizze</figcaption>
                </figure>
            </div>


<p>Ich entwickelte einen <strong>p5.js-Sketch</strong>, um das beobachtete Verhalten zu simulieren. Das stellte sich als schwieriger heraus, als ich zunächst dachte. Anfangs wollte ich eine möglichst naturnahe Animation erstellen, wie ein Wattwurmhaufen entsteht. Das fiel mir jedoch schwer, und die Umsetzung im Code erwies sich als komplizierter als gedacht. Außerdem rückten dabei die natürlichen Muster in den Hintergrund.<br>
Deshalb entschied ich mich, meinen Fokus darauf zu richten, wie<strong> mehrere Haufen als Gruppe</strong> wirken, denn auch im Watt sieht man die Haufen nie allein. Es ist stets eine große Ansammlung, die sich weit über die Fläche erstreckt. Obwohl die exakte Darstellung nicht mehr im Fokus stand, gab es einige Aspekte, die charakteristisch für die Haufen sind und beachtet werden sollten: wichtig ist die <strong>Varianz in Größe, Form und Ausrichtung</strong> – außerdem sollte zu jedem Häufchen ein Loch generiert werden.<br>
<br>
Insgesamt fand ich es spannend, mehr über den Wattwurm zu erfahren und sein Verhalten genauer zu beobachten. Die Häufchen könnten noch interessantere und verschlungenere Spiralen bilden, um die Vielfalt und Willkürlichkeit der Realität besser wiederzugeben.<br>
Abgeschlossen wurde das Projekt durch eine kurze Dokumentation mit dem Code und einer Reflexion der Beobachtungen.</p>
        </div>
    </main>

    <nav class="bottom-nav">
        <a href="../index.html" class="nav-item">
            <img src="../images/home.png" alt="Startseite">
        </a>
        <a href="../search/index.html" class="nav-item">
            <img src="../images/search.png" alt="Suche">
        </a>
        <a href="../profile/index.html" class="nav-item">
            <img src="../images/profil.png" alt="Profil">
        </a>
    </nav>

    <!-- FINALE KORREKTUR: Fügt die Logik zum Entfernen von Markierungen hinzu -->
    <script>
        const mainContent = document.querySelector('main');

        // --- Logik zum Markieren und Scrollen ---
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const highlightTerm = urlParams.get('highlight');

            if (highlightTerm) {
                const contentArea = document.querySelector('.topic-content');
                if (contentArea) {
                    const regex = new RegExp(highlightTerm.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'gi');
                    contentArea.innerHTML = contentArea.innerHTML.replace(regex, (match) => `<mark>${match}</mark>`);
                    const firstMark = contentArea.querySelector('mark');
                    if (firstMark) {
                        firstMark.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }
            }
        });

        // NEU: Logik zum Entfernen der restlichen Markierungen bei Klick
        document.body.addEventListener('click', function(event) {
            // Prüft, ob das geklickte Element ein <mark>-Tag ist
            if (event.target.tagName === 'MARK') {
                const clickedMark = event.target;
                // Sammelt alle Markierungen auf der Seite
                const allMarks = document.querySelectorAll('mark');

                // Geht durch alle Markierungen
                allMarks.forEach(mark => {
                    // Wenn es nicht die angeklickte Markierung ist...
                    if (mark !== clickedMark) {
                        // ...ersetze das <mark>-Element durch seinen reinen Textinhalt.
                        mark.outerHTML = mark.innerHTML;
                    }
                });
            }
        }, { once: false }); // Stellt sicher, dass der Listener aktiv bleibt


        // --- Logik für das Iframe-Modal ---
        const overlayLinks = document.querySelectorAll('.overlay-link');
        const iframeModal = document.getElementById('iframe-modal');
        const iframe = document.getElementById('external-content-frame');
        const closeIframeBtn = document.getElementById('close-iframe-btn');

        if (overlayLinks.length > 0 && iframeModal && closeIframeBtn) {
            overlayLinks.forEach(link => {
                link.addEventListener('click', function(event) {
                    if (this.href.includes('github.com') && !this.href.includes('github.io')) {
                        return;
                    }
                    event.preventDefault();
                    mainContent.style.visibility = 'hidden';
                    iframe.src = this.href;
                    iframeModal.classList.add('visible');
                });
            });

            closeIframeBtn.addEventListener('click', function(event) {
                event.preventDefault();
                iframeModal.classList.remove('visible');
                mainContent.style.visibility = 'visible';
                iframe.src = '';
            });
        }

        // --- Logik für das Bild-Modal (jetzt mit Event Delegation) ---
        const imageModal = document.getElementById('image-modal');
        const modalImage = document.getElementById('modal-image');
        const closeImageBtn = document.querySelector('.close-image-btn');

        if (imageModal && modalImage && closeImageBtn) {
            // Der Listener wird an den Hauptinhalt gehängt
            mainContent.addEventListener('click', function(event) {
                // Prüft, ob das geklickte Element (oder ein Elternelement) ein <figure> in der .image-gallery ist
                const figure = event.target.closest('.image-gallery figure');
                if (figure) {
                    mainContent.style.visibility = 'hidden';
                    const img = figure.querySelector('img');
                    modalImage.src = img.src;
                    imageModal.classList.add('visible');
                }
            });

            function closeImageModal() {
                imageModal.classList.remove('visible');
                mainContent.style.visibility = 'visible';
            }

            closeImageBtn.addEventListener('click', closeImageModal);

            imageModal.addEventListener('click', function(event) {
                if (event.target === imageModal) {
                    closeImageModal();
                }
            });
        }
    </script>

</body>
</html>